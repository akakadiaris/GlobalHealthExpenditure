<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exploring Global Health Expenditure Trends - 2&nbsp; Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./results.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Exploring Global Health Expenditure Trends</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/akakadiaris/GlobalHealthExpenditure" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#technical-description" id="toc-technical-description" class="nav-link active" data-scroll-target="#technical-description"><span class="header-section-number">2.1</span> Technical Description</a></li>
  <li><a href="#research-plan" id="toc-research-plan" class="nav-link" data-scroll-target="#research-plan"><span class="header-section-number">2.2</span> Research Plan</a></li>
  <li><a href="#missing-value-analysis" id="toc-missing-value-analysis" class="nav-link" data-scroll-target="#missing-value-analysis"><span class="header-section-number">2.3</span> Missing value analysis</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/akakadiaris/GlobalHealthExpenditure/edit/main/data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/akakadiaris/GlobalHealthExpenditure/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>For our research, we leveraged datasets from the Institute for Health Metrics and Evaluation (IHME), specifically the Global Health Spending datasets covering the periods 1995 to 2019 and 2020 to 2050. Accessible through the following links respectively: <a href="https://ghdx.healthdata.org/record/ihme-data/global-health-spending-1995-2019">Global Health Spending 1995 to 2019</a> and <a href="https://ghdx.healthdata.org/record/ihme-data/global-expected-health-spending-2020-2050">Global Health Spending 2020 to 2050</a>. These datasets aim to provide a comprehensive understanding of health spending across diverse countries and regions. IHME, a renowned research institute, specializes in collecting and analyzing global health data, offering valuable insights into health trends and challenges.</p>
<p>The datasets offer a detailed breakdown of total health spending, categorizing expenditures by source (government, out-of-pocket, and prepaid private), and development assistance for health (DAH). To enhance usability, estimates are presented in constant 2021 United States Dollars, constant 2021 purchasing power parity adjusted (PPP) dollars, and as a percentage of gross domestic product (GDP). This diverse set of metrics facilitates a nuanced analysis of health spending trends and their economic implications.</p>
<section id="technical-description" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="technical-description"><span class="header-section-number">2.1</span> Technical Description</h2>
<p><strong>Data Format and Collection</strong>:</p>
<p>The data collection process involved multiple sources, with a primary focus on the World Health Organization’s Global Health Expenditure Database (GHED), a reputable repository compiling global health expenditure information. Additionally, data for development assistance for health (DAH) were sourced from various outlets, including program reports, budget data, national estimates, and National Health Accounts (NHAs). Domestic health spending sources, encompassing government, out-of-pocket, and prepaid private health spending, primarily relied on data from the WHO’s GHED. For countries not covered by GHED, information was extracted from respective country ministries of health or finance websites.</p>
<p>Assessment of GHED-extracted data reliability involved scrutinizing metadata provided by the World Health Organization (WHO). Utilizing natural language processing techniques, a data quality score ranging from 0 to 5 was assigned to each data point, considering metadata aspects such as reporting data source, data type, methods of estimation, and completeness. These quality scores informed the weighing of raw data, and a spatiotemporal Gaussian process model was applied to generate comprehensive time series estimates from 1995 to 2019 for each country. Additionally, 95% uncertainty intervals (UIs) were calculated to convey the range of potential values, accounting for inherent uncertainties. More details about the methodology can be found in the paper titled “Global investments in pandemic preparedness and COVID-19: development assistance and domestic spending on health between 1990 and 2026.”</p>
<p>The dataset is structured in a tabular format, with each row representing a specific country or region and columns containing information on health spending metrics and related economic indicators. There are 79 indicators in total. The five primary variables—government health spending, out-of-pocket health spending, prepaid private health spending, and development assistance for health—all have mean values. Each of these variables is further stratified into subcategories, including per person, per total health spending, and per GDP. Additionally, the dataset provides values representing the lower and upper bounds for constant 2021 United States dollars, and lower and upper bounds for constant 2021 purchasing power parity power dollars, offering a comprehensive exploration of health spending dynamics across diverse metrics and dimensions.</p>
<p>This granularity enables a comprehensive examination of the financing landscape in the realm of global health. The inclusion of lower and upper bounds for each health spending metric, coupled with adjustments for inflation using country-specific exchange rates and the IMF World Economic Outlook database deflator series, reflects a commitment to methodological rigor and transparency.</p>
<p>By incorporating a range of values represented by lower and upper bounds, the dataset acknowledges the inherent uncertainty in economic and health expenditure forecasting. Economic conditions, currency exchange rates, and other external factors can introduce variability in health spending estimates. Therefore, providing a band of potential values serves as a safeguard against unforeseen fluctuations that may impact health spending trajectories.</p>
<p>The adjustment for inflation using country-specific exchange rates and IMF deflators is crucial for maintaining the temporal integrity of the dataset. It ensures that all spending estimates are expressed in a consistent and comparable unit (inflation-adjusted 2021 US dollars), allowing for meaningful analysis and interpretation across different time periods and geographic regions. This meticulous approach to data preparation enhances the dataset’s reliability and utility, catering to the diverse needs of researchers, policymakers, and analysts in the field of global health economics.</p>
<p>This dual-column structure, with lower and upper values, signifies a commitment to precision and transparency in data presentation. The lower and upper values serve as bookends, delineating a plausible range for each metric and acknowledging the inherent uncertainty in health expenditure estimates. This approach enhances the dataset’s reliability, providing users with nuanced insights into the potential variability of the reported values and promoting a more informed interpretation of global health spending trends.</p>
<p><strong>Frequency of Updates</strong>:</p>
<p>The dataset on Global Health Spending from 1995 to 2019, provided by IHME, does not appear to be regularly updated, and its last recorded information release was on January 24, 2023.</p>
<p><strong>Importing the Data</strong>:</p>
<p>From the IHME Global Health Data Exchange website, anyone can download the datasets, which are encompassed in an 834.93 KB CSV file (2015-2019) and a 1.09 MB CSV file (2020-2050). These files can then be conveniently imported into R for further analysis.</p>
</section>
<section id="research-plan" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="research-plan"><span class="header-section-number">2.2</span> Research Plan</h2>
<p>Within this section, we will undertake a detailed exploration of how this comprehensive dataset equips us to thoroughly respond to the research questions introduced earlier.</p>
<p><strong>Trends in Global Health Spending Over Time</strong>:</p>
<p>In this segment, our objective is to visually represent the evolving trends in global health spending over time. To achieve this, we will employ a multiple-line chart, enabling a comprehensive comparison of total health spending, spending per capita, and spending as a percentage of GDP across different temporal spans. By leveraging this visualization technique, we aim to discern any notable trends or patterns in health spending over the specified timeframe. This approach not only facilitates an exploration of the transformation in total global health spending but also provides insights into the observed trends, allowing us to investigate the potential impact of major global events, such as pandemics, on health spending.</p>
<p><strong>Geographic Disparities</strong>:</p>
<p>In our pursuit to unveil geographic disparities, we will direct our focus on different regions, which may be country-specific or continent-specific. This approach enables us to explore variations in health spending across diverse regions or continents.</p>
<p>To commence, our examination will involve comparing health expenditure trends over time for various continents. Moreover, considering that the dataset categorizes countries into low, middle, and high-income groups, we aim to analyze health expenditure trends over time within these distinct income brackets.</p>
<p>Adding granularity to our exploration, we intend to provide an overview of total health spending in the dataset’s most recent year, 2019. Through a geographic map, we will visualize total health spending with a continuous scale, creating an animated cartogram for the year 2019. This cartogram will specifically highlight total health spending and break it down into three categories: government, out-of-pocket, and pre-paid private spending.</p>
<p>As a complementary visualization, we will construct a horizontal bar chart to compare total health spending for each country or region. This visualization is particularly effective in illustrating disparities. Additionally, a stacked bar chart will be employed to showcase the composition of health spending in each country, delineating categories such as government spending, out-of-pocket expenses, and prepaid private financing. This approach aims to provide insights into how countries allocate resources within their health systems, further contributing to our understanding of geographic health spending disparities.</p>
<p><strong>Health Spending by Financing Source</strong>:</p>
<p>Our third research theme delves into the intricate landscape of health spending by financing source. The dataset meticulously categorizes health spending into three domestic financing sources: government, out-of-pocket, and prepaid private. Within this section, our aim is to unravel nuanced patterns within these categories, exploring how they have evolved over the years from 1995 to 2019. Our particular interest lies in identifying potential effects of global events embedded in the data.</p>
<p>To visually capture the evolving dynamics of health spending by financing source, we advocate for the creation of proportional stacked bar graphs spanning the years from 1995 to 2019. These graphs will serve as insightful tools, facilitating a comparative analysis of the proportions of different financing sources relative to each other across various temporal slices. Specifically, our plan includes generating three distinct graphs representing total spending, spending per person, and spending as a percentage of GDP over the specified time frame, all visualized as proportional stacked bar graphs. This approach provides an effective means to discern shifts and variations over the years, contributing to a comprehensive understanding of the intricate dynamics shaping health spending patterns.</p>
<p>Moreover, our focus on the year 2019, being the most recent year, aims to present a current snapshot of the financial health expenditure landscape. To vividly illustrate the different proportions of health spending in this pivotal year, we intend to employ a pie chart. This visualization will offer a clear and concise representation of the distribution of financing sources, providing a succinct overview of the financial health expenditure situation in 2019.</p>
<p><strong>Global Health Spending Patterns 2020 to 2050</strong>:</p>
<p>For the last theme we will compare the past with future health spending patterns. We wil compare them based on the three themes discussed above, so over time patterns, geographic disparities, and health spending by financing source.</p>
<p>To compare them over time, we will create a line chart for the years 1995 to 2050, where the past and future predictions are distinguishable by color. We will do the same for the three different health spending categories (government, out-of-pocket, and prepaid private). Furthermore, we will create stacked bar charts for the years 1995 to 2050 to compare the proportions of financing sources and how they will change over time.</p>
<p>Focusing on the second theme, the geographic disparities. We will create a world map for the years 1995, 2019 and 2050 which will allow us to visually compare the total health spending patterns geographically and how they change over time.</p>
<p>To compare both time and geographic are of the past and future, we want to create a heatmap to display health spending trends across both time and regions. Color intensity will represent spending levels, providing a visual summary of variations over the entire dataset.</p>
</section>
<section id="missing-value-analysis" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="missing-value-analysis"><span class="header-section-number">2.3</span> Missing value analysis</h2>
<p>As a whole, the data seems to be very clean. Upon thorough scrutiny of the data set, it becomes apparent that a singular column, the column titled “iso3,” has missing data. This column had 100 missing values, while all the other columns had no missing information.</p>
<p><img src="missing.jpg" class="img-fluid" style="width:65.0%"></p>
<p>These missing values, however, are not indicative of a flaw or oversight but rather a deliberate design choice in alignment with the dataset’s prescribed structure.The “iso3” column serves as a repository for three-letter country codes, crucial for country-specific identification. Upon closer inspection, it is discernible that certain rows within this column intentionally lack values. The rows that have missing is03 values correspond to values High income, Low income, Lower-middle income, and Upper-middle income in “location_name” column. This intentional omission is justified by consulting the dataset’s documentation, where it is explicitly stated that these specific entries do not correspond to any particular country.</p>
<p><img src="datadocumentation.jpg" class="img-fluid" style="width:65.0%"></p>
<p>Instead, these instances are intended to encapsulate broader, non-country-specific information or aggregates that do not require a specific country code. In essence, the intentional missing values in the “iso3” column serve as placeholders for entries that transcend the bounds of individual countries, reflecting a nuanced data structure designed to accommodate diverse information categories within the dataset.</p>
<p>That being said, after taking a closer look at the data, we noticed that there are “-” or O inserted as some values.</p>
<p>Those columns that have missing values and how many there are are:</p>
<p>with - values: ppp_total_mean 86<br>
ppp_total_lower 400<br>
ppp_total_upper 75 ppp_total_ppp_mean 83<br>
ppp_total_ppp_lower 386 ppp_total_ppp_upper 77<br>
oop_total_lower 25 oop_total_ppp_lower 25<br>
dah_total_mean 399<br>
dah_total_ppp_mean 399</p>
<p>with “0” values: dah_total_mean 1000 dah_total_ppp_mean 1000 ghes_per_cap_mean 9<br>
ghes_per_cap_lower 17<br>
ghes_per_cap_upper 5<br>
ppp_per_cap_mean 747 ppp_per_cap_lower 928<br>
ppp_per_cap_upper 633<br>
ppp_per_cap_ppp_mean 599 ppp_per_cap_ppp_lower 692 ppp_per_cap_ppp_upper 510 oop_per_cap_mean 25 oop_per_cap_lower 25<br>
oop_per_cap_upper 12<br>
oop_per_cap_ppp_mean 25 oop_per_cap_ppp_lower 25<br>
oop_per_cap_ppp_upper 19<br>
dah_per_cap_mean 1857<br>
dah_per_cap_ppp_mean 1700<br>
ppp_per_the_mean 497<br>
ppp_per_the_lower 499 ppp_per_the_upper 460 oop_per_the_mean 25<br>
oop_per_the_lower 25<br>
oop_per_the_upper 25<br>
dah_per_the_mean 1654<br>
dah_per_the_lower 1660<br>
dah_per_the_upper 1648<br>
ppp_per_gdp_mean 965 ppp_per_gdp_lower 1237<br>
ppp_per_gdp_upper 800 oop_per_gdp_mean 25<br>
oop_per_gdp_lower 25<br>
oop_per_gdp_upper 25<br>
dah_per_gdp_mean 2555<br>
dah_per_gdp_lower 2591<br>
dah_per_gdp_upper 2537</p>
<p>Below are two bar graphs with this information illustrated.</p>
<p><img src="dash.jpg" class="img-fluid" style="width:100.0%"> <img src="zero.jpg" class="img-fluid" style="width:100.0%"></p>
<p>When looking at the data, each country has 25 rows of data (corresponding to years). So the variables in which the cases of - or 0 being 25, that is that one countries values have missing data. That then got us thinking about the looking at each location_name by itself and seeing if the missing values for each of those rows is the same or different. It turns out that, for different years, the amount of values that are - or 0 for each location, might not be the same.</p>
<p>That being said, we decided against doing any imputation and we decided that we would convert any values that are - or 0 into 0. Since there is no case where the geniune value for any of the countries should be 0, we would not have to worry about misinterpretation.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./results.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>